/** Runs all composed analysis workflows for US states. */
namespace osm.geo.UnitedStates.analysis {
  use osm.types

  /** Runs 10 composed analysis workflows for a single region using a shared cache. */
  workflow AnalyzeRegion(region: String = "Liechtenstein") => (completed_region: String) andThen {
    cache = osm.geo.Operations.Cache(region = $.region)
    bicycleRoutes = examples.composed.VisualizeBicycleRoutesFromCache(cache = cache.cache)
    parks = examples.composed.AnalyzeParksFromCache(cache = cache.cache)
    largeCities = examples.composed.LargeCitiesMapFromCache(cache = cache.cache, min_pop = 10000)
    transport = examples.composed.TransportOverviewFromCache(cache = cache.cache)
    nationalParks = examples.composed.NationalParksAnalysisFromCache(cache = cache.cache)
    cityAnalysis = examples.composed.CityAnalysisFromCache(cache = cache.cache, min_population = 100000)
    transportMap = examples.composed.TransportMapFromCache(cache = cache.cache)
    boundaries = examples.composed.StateBoundariesWithStatsFromCache(cache = cache.cache)
    cities = examples.composed.DiscoverCitiesAndTownsFromCache(cache = cache.cache)
    regional = examples.composed.RegionalAnalysisFromCache(cache = cache.cache)

    yield AnalyzeRegion(completed_region = $.region)
  }

  /** Runs AnalyzeRegion for all 50 US states plus DC. */
  workflow AnalyzeAllStates() => (states_completed: Long) andThen {
    alabama = AnalyzeRegion(region = "Alabama")
    alaska = AnalyzeRegion(region = "Alaska")
    arizona = AnalyzeRegion(region = "Arizona")
    arkansas = AnalyzeRegion(region = "Arkansas")
    california = AnalyzeRegion(region = "California")
    colorado = AnalyzeRegion(region = "Colorado")
    connecticut = AnalyzeRegion(region = "Connecticut")
    delaware = AnalyzeRegion(region = "Delaware")
    districtOfColumbia = AnalyzeRegion(region = "DistrictOfColumbia")
    florida = AnalyzeRegion(region = "Florida")
    georgia = AnalyzeRegion(region = "GeorgiaUS")
    hawaii = AnalyzeRegion(region = "Hawaii")
    idaho = AnalyzeRegion(region = "Idaho")
    illinois = AnalyzeRegion(region = "Illinois")
    indiana = AnalyzeRegion(region = "Indiana")
    iowa = AnalyzeRegion(region = "Iowa")
    kansas = AnalyzeRegion(region = "Kansas")
    kentucky = AnalyzeRegion(region = "Kentucky")
    louisiana = AnalyzeRegion(region = "Louisiana")
    maine = AnalyzeRegion(region = "Maine")
    maryland = AnalyzeRegion(region = "Maryland")
    massachusetts = AnalyzeRegion(region = "Massachusetts")
    michigan = AnalyzeRegion(region = "Michigan")
    minnesota = AnalyzeRegion(region = "Minnesota")
    mississippi = AnalyzeRegion(region = "Mississippi")
    missouri = AnalyzeRegion(region = "Missouri")
    montana = AnalyzeRegion(region = "Montana")
    nebraska = AnalyzeRegion(region = "Nebraska")
    nevada = AnalyzeRegion(region = "Nevada")
    newHampshire = AnalyzeRegion(region = "NewHampshire")
    newJersey = AnalyzeRegion(region = "NewJersey")
    newMexico = AnalyzeRegion(region = "NewMexico")
    newYork = AnalyzeRegion(region = "NewYork")
    northCarolina = AnalyzeRegion(region = "NorthCarolina")
    northDakota = AnalyzeRegion(region = "NorthDakota")
    ohio = AnalyzeRegion(region = "Ohio")
    oklahoma = AnalyzeRegion(region = "Oklahoma")
    oregon = AnalyzeRegion(region = "Oregon")
    pennsylvania = AnalyzeRegion(region = "Pennsylvania")
    rhodeIsland = AnalyzeRegion(region = "RhodeIsland")
    southCarolina = AnalyzeRegion(region = "SouthCarolina")
    southDakota = AnalyzeRegion(region = "SouthDakota")
    tennessee = AnalyzeRegion(region = "Tennessee")
    texas = AnalyzeRegion(region = "Texas")
    utah = AnalyzeRegion(region = "Utah")
    vermont = AnalyzeRegion(region = "Vermont")
    virginia = AnalyzeRegion(region = "Virginia")
    washington = AnalyzeRegion(region = "Washington")
    westVirginia = AnalyzeRegion(region = "WestVirginia")
    wisconsin = AnalyzeRegion(region = "Wisconsin")
    wyoming = AnalyzeRegion(region = "Wyoming")

    yield AnalyzeAllStates(states_completed = 51)
  }

}
