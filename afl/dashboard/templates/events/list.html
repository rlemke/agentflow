{% extends "base.html" %}
{% block title %}Events — AgentFlow{% endblock %}
{% block content %}
<h1>Events</h1>

<nav>
    <a href="/events">All</a> |
    <a href="/events?state=pending">Pending</a> |
    <a href="/events?state=running">Running</a> |
    <a href="/events?state=completed">Completed</a> |
    <a href="/events?state=failed">Failed</a>
</nav>

{% if filter_state %}
<p>Filtered by state: <span class="badge badge-{{ filter_state|state_color }}">{{ filter_state }}</span></p>
{% endif %}

<figure>
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Step ID</th>
            <th>Step Name</th>
            <th>Workflow ID</th>
            <th>State</th>
            <th>Event Type</th>
        </tr>
    </thead>
    <tbody>
        {% for event in events %}
        <tr>
            <td><a href="/events/{{ event.uuid }}">{{ event.uuid[:12] }}...</a></td>
            <td class="mono">{{ event.step_id[:12] }}...</td>
            <td>{{ step_names.get(event.step_id, '') or '—' }}</td>
            <td class="mono">{{ event.workflow_id[:12] }}...</td>
            <td><span class="badge badge-{{ event.state|state_color }}">{{ event.state }}</span></td>
            <td>{{ event.name }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</figure>
{% endblock %}
