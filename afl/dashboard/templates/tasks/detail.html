{% extends "base.html" %}
{% block title %}Task {{ task.name if task else "Not Found" }} — AgentFlow{% endblock %}
{% block content %}
{% if not task %}
<h1>Task not found</h1>
<p><a href="/tasks">Back to tasks</a></p>
{% else %}
<h1>Task <span class="mono">{{ task.name }}</span></h1>

<div class="grid">
    <div>
        <article>
            <header>Details</header>
            <table>
                <tr><th>UUID</th><td class="mono">{{ task.uuid }}</td></tr>
                <tr><th>Name</th><td>{{ task.name }}</td></tr>
                <tr><th>State</th><td><span class="badge badge-{{ task.state|state_color }}">{{ task.state }}</span></td></tr>
                <tr><th>Task List</th><td>{{ task.task_list_name }}</td></tr>
                <tr><th>Data Type</th><td>{{ task.data_type or "—" }}</td></tr>
                <tr><th>Created</th><td>{{ task.created|timestamp }}</td></tr>
                <tr><th>Updated</th><td>{{ task.updated|timestamp }}</td></tr>
            </table>
        </article>
    </div>
    <div>
        <article>
            <header>Related Entities</header>
            <table>
                <tr><th>Runner</th><td><a href="/runners/{{ task.runner_id }}" class="mono">{{ task.runner_id }}</a></td></tr>
                <tr><th>Workflow ID</th><td class="mono">{{ task.workflow_id }}</td></tr>
                <tr><th>Flow</th><td><a href="/flows/{{ task.flow_id }}" class="mono">{{ task.flow_id }}</a></td></tr>
                <tr><th>Step</th><td><a href="/steps/{{ task.step_id }}" class="mono">{{ task.step_id }}</a></td></tr>
            </table>
        </article>
    </div>
</div>

{% if task.error %}
<article aria-label="Error" class="state-badge-failed">
    <header>Error</header>
    <pre><code class="language-json">{{ task.error | tojson(indent=2) }}</code></pre>
</article>
{% endif %}

{% if task.data %}
<article>
    <header>Data</header>
    <pre><code class="language-json">{{ task.data | tojson(indent=2) }}</code></pre>
</article>
{% endif %}
{% endif %}
{% endblock %}
