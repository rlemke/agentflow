{% extends "base.html" %}

{% block title %}
{% if server %}{{ server.server_name }} â€” AgentFlow{% else %}Server Not Found{% endif %}
{% endblock %}

{% block content %}
{% if server %}
<hgroup>
    <h1>{{ server.server_name }}</h1>
    <p>
        <span class="mono">{{ server.server_group }}</span>
        &mdash; {{ server.service_name }}
        &mdash;
        <span class="badge badge-{{ server.state|state_color }}">{{ server.state }}</span>
    </p>
</hgroup>

<div class="summary-grid">
    <article class="summary-card">
        <h2 class="mono">{{ server.uuid|truncate_uuid }}</h2>
        <p>Server ID</p>
    </article>
    <article class="summary-card">
        <h2>{{ server.start_time|timestamp }}</h2>
        <p>Start Time</p>
    </article>
    <article class="summary-card">
        <h2>{{ server.ping_time|timestamp }}</h2>
        <p>Last Ping</p>
    </article>
</div>

<div id="server-detail-content"
     hx-get="/v2/servers/{{ server.uuid }}/partial"
     hx-trigger="every 5s"
     hx-swap="innerHTML">
    {% include "v2/servers/_detail_content.html" %}
</div>

{% else %}
<h1>Server Not Found</h1>
<p>The requested server could not be found.</p>
<a href="/v2/servers">Back to Servers</a>
{% endif %}
{% endblock %}
