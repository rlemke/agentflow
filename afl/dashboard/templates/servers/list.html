{% extends "base.html" %}
{% block title %}Servers â€” AgentFlow{% endblock %}
{% block content %}
<h1>Servers</h1>

<nav>
    <a href="/servers">All</a> |
    <a href="/servers?state=startup">Startup</a> |
    <a href="/servers?state=running">Running</a> |
    <a href="/servers?state=shutdown">Shutdown</a> |
    <a href="/servers?state=error">Error</a>
</nav>

{% if filter_state %}
<p>Filtered by state: <span class="badge badge-{{ filter_state|state_color }}">{{ filter_state }}</span></p>
{% endif %}

<figure>
<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Group</th>
            <th>Service</th>
            <th>State</th>
            <th>IPs</th>
            <th>Last Ping</th>
            <th>Handlers</th>
        </tr>
    </thead>
    <tbody>
        {% for server in servers %}
        <tr>
            <td><a href="/servers/{{ server.uuid }}">{{ server.server_name }}</a></td>
            <td>{{ server.server_group }}</td>
            <td>{{ server.service_name }}</td>
            <td><span class="badge badge-{{ server.state|state_color }}">{{ server.state }}</span></td>
            <td class="mono">{{ server.server_ips|join(", ") }}</td>
            <td>{{ server.ping_time|timestamp }}</td>
            <td>{{ server.handlers|join(", ") }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</figure>
{% endblock %}
