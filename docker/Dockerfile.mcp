# AgentFlow MCP Server
#
# MCP servers use stdio transport (stdin/stdout JSON-RPC), not HTTP.
# This container is meant to be run interactively or connected to
# by LLM agents via stdio.
#
# Usage:
#   docker compose --profile mcp run --rm mcp
#
FROM python:3.12-slim

WORKDIR /app

# Install dependencies
COPY pyproject.toml .
RUN pip install --no-cache-dir -e ".[mcp,mongodb]" || \
    pip install --no-cache-dir lark pymongo mcp

# Copy application code
COPY afl/ ./afl/

CMD ["python", "-m", "afl.mcp"]
